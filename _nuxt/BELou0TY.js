import E from"./DEGPj8ve.js";import F from"./O8OYElDg.js";import q from"./6xN54Y_U.js";import G from"./CE2XI-CB.js";import{e as H,j as g,f as h,k as J,c as i,b as y,w as D,a as n,l as M,t as d,F as w,r as _,m as T,o as a,d as O,n as V,_ as Q}from"./BZS1xoR2.js";import"./Z5dZt-FC.js";import"./DFHlkhfu.js";import"./DYlrdBA5.js";import"./QdBxEJZw.js";import"./BuKMlVHo.js";import"./kmrygLL9.js";import"./DQ5gMIdq.js";import"./Bf_abw1o.js";import"./DM_wOqP0.js";import"./CHOj1P8S.js";const W={class:"min-h-screen flex flex-col"},X={key:0,class:"p-8"},Y={class:"space-y-4"},Z={class:"fixed top-0 left-0 right-0 z-10 bg-gray-900 bg-opacity-80 p-4"},I={class:"flex justify-between items-center text-sm mb-2"},ee={class:"absolute inset-0 pt-16 pb-16 flex flex-col items-center",style:{"z-index":"1"}},te={class:"min-h-full flex flex-col"},le={class:"flex flex-col items-center px-5"},ne={class:"w-full max-w-[calc(100vw-40px)] md:max-w-4xl mb-16"},se=["id"],oe=H({__name:"reader",setup(ie){const m=g(""),x=g(!1),r=g({section:0,line:0}),S=g(null),C=g(null),s=h(()=>m.value?m.value.split(/\n\n+/).map(e=>e.split(`
`)).filter(e=>e.length):[]),L=h(()=>s.value[r.value.section]||[]),N=h(()=>s.value.slice(0,r.value.section)),$=h(()=>s.value.slice(r.value.section+1)),z=h(()=>{if(!s.value.length)return 0;const e=s.value.reduce((l,o)=>l+o.length,0);return(s.value.slice(0,r.value.section).reduce((l,o)=>l+o.length,0)+r.value.line)/e*100});function B(e){console.log("isValidPosition");const t=s.value[e.section];return t!==void 0&&e.line>=0&&e.line<t.length}function A(e,t){var v;console.log("calculateNextPosition",{direction:e,mode:t});const{section:l,line:o}=r.value;if(t==="line")if(e==="next"){if(o+1<((v=s.value[l])==null?void 0:v.length))return{section:l,line:o+1};if(l+1<s.value.length)return{section:l+1,line:0}}else{if(o>0)return{section:l,line:o-1};if(l>0){const u=l-1;return{section:u,line:s.value[u].length-1}}}else{if(e==="next"&&l+1<s.value.length)return{section:l+1,line:0};if(e==="prev"&&l>0){const u=l-1;return{section:u,line:s.value[u].length-1}}}return null}async function k(e){if(console.log("navigateTo",e),!B(e))return;r.value=e,await T();const t=C.value,l=document.getElementById("current-line");if(!t||!l)return;const o=t.getBoundingClientRect(),v=l.getBoundingClientRect(),u=o.height/3,b=t.scrollTop+(v.top-o.top)-u;t.scrollTo({top:b,behavior:"smooth"})}function p(e,t){console.log("navigate",{direction:e,mode:t});const l=A(e,t);l&&k(l)}function U(e){console.log("handleKeydown",e.key),e.shiftKey?e.key==="ArrowRight"?(e.preventDefault(),p("next","section")):e.key==="ArrowLeft"&&(e.preventDefault(),p("prev","section")):e.key==="ArrowRight"?(e.preventDefault(),p("next","line")):e.key==="ArrowLeft"?(e.preventDefault(),p("prev","line")):e.key==="ArrowUp"?(e.preventDefault(),p("prev","section")):e.key==="ArrowDown"?(e.preventDefault(),p("next","section")):e.key==="r"||e.key==="R"?(e.preventDefault(),k({section:0,line:0})):e.key==="Escape"&&(e.preventDefault(),x.value=!1)}function j(){s.value.length&&(x.value=!0,k({section:0,line:0}))}function K(){x.value=!1}return J(x,e=>{e&&T(()=>{var t;(t=S.value)==null||t.focus()})}),(e,t)=>{var b;const l=E,o=F,v=q,u=G;return a(),i("div",W,[x.value?(a(),i("div",{key:1,class:"fixed inset-0 bg-gray-900 text-white",onKeydown:U,tabindex:"0",ref_key:"presentationRef",ref:S},[n("div",Z,[n("div",I,[n("span",null,"Section "+d(r.value.section+1)+"/"+d(s.value.length),1),n("span",null,"Line "+d(r.value.line+1)+"/"+d(((b=L.value)==null?void 0:b.length)||0),1),y(o,{icon:"i-heroicons-x-mark",color:"gray",variant:"ghost",size:"sm",onClick:K,"aria-label":"Close presentation"})]),y(u,{value:z.value,color:"primary",class:"h-1"},null,8,["value"])]),t[5]||(t[5]=M('<div class="fixed left-0 right-0 top-0 h-full pointer-events-none" style="z-index:0;" data-v-e6e4d82b><div class="relative h-full" data-v-e6e4d82b><div class="absolute top-[calc(33.333vh+1rem)] w-full" data-v-e6e4d82b><div class="flex justify-center items-center" data-v-e6e4d82b><div class="max-w-4xl w-full" data-v-e6e4d82b><div class="w-full h-12 bg-primary-500 bg-opacity-10 rounded-lg" data-v-e6e4d82b></div></div></div></div></div></div>',1)),n("div",ee,[n("div",{class:"h-full w-full overflow-y-auto",ref_key:"scrollContainer",ref:C},[n("div",te,[t[4]||(t[4]=n("div",{class:"h-[33vh] shrink-0"},null,-1)),n("div",le,[(a(!0),i(w,null,_(N.value,(f,c)=>(a(),i("div",{key:`prev-section-${c}`,class:"w-full max-w-[calc(100vw-40px)] md:max-w-4xl opacity-25 mb-16"},[(a(!0),i(w,null,_(f,(P,R)=>(a(),i("div",{key:`prev-${c}-${R}`,class:"text-3xl mb-4 text-center whitespace-nowrap overflow-hidden text-ellipsis fit-text"},d(P),1))),128))]))),128)),n("div",ne,[(a(!0),i(w,null,_(L.value,(f,c)=>(a(),i("div",{key:`current-${c}`,class:V(["text-3xl mb-4 text-center whitespace-nowrap overflow-hidden text-ellipsis fit-text",{"font-semibold":c===r.value.line}]),id:c===r.value.line?"current-line":""},d(f),11,se))),128))]),(a(!0),i(w,null,_($.value,(f,c)=>(a(),i("div",{key:`future-section-${c}`,class:V(["w-full max-w-[calc(100vw-40px)] md:max-w-4xl mb-16",{"opacity-50":c===0,"opacity-25":c>0}])},[(a(!0),i(w,null,_(f,(P,R)=>(a(),i("div",{key:`future-${c}-${R}`,class:"text-3xl mb-4 text-center whitespace-nowrap overflow-hidden text-ellipsis fit-text"},d(P),1))),128))],2))),128)),t[3]||(t[3]=n("div",{class:"h-[66vh] shrink-0"},null,-1))])])],512)]),t[6]||(t[6]=n("div",{class:"fixed bottom-0 left-0 right-0 z-10 bg-gray-900 bg-opacity-80 p-4 flex justify-center gap-8 text-sm text-gray-400"},[n("span",null,"← → Navigate Lines"),n("span",null,"Shift + ← → Navigate Sections"),n("span",null,"R Reset")],-1))],544)):(a(),i("div",X,[y(v,{class:"max-w-3xl mx-auto"},{default:D(()=>[n("div",Y,[t[2]||(t[2]=n("h1",{class:"text-2xl font-semibold"},"Lyrics Reader",-1)),y(l,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=f=>m.value=f),rows:10,placeholder:"Paste your lyrics here...",class:"w-full font-mono"},null,8,["modelValue"]),y(o,{onClick:j,disabled:!m.value,color:"primary",size:"lg",class:"w-full"},{default:D(()=>t[1]||(t[1]=[O(" Start Presentation ")])),_:1},8,["disabled"])])]),_:1})]))])}}}),be=Q(oe,[["__scopeId","data-v-e6e4d82b"]]);export{be as default};
